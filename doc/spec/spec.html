<!doctype html>
<html lang="en">
 <head> 
  <meta charset="UTF-8"> 
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
  <title>jooby: route spec module</title> 
  <meta name="description" content="Scalable, fast and modular micro web framework for Java"> 
  <meta name="keywords" content="Java, Micro Web Framework, Async, Easy to use, Micro, Sinatra, Express, Scalable, Modern, Best, Web, Framework, route spec"> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
  <link rel="canonical" href="#"> 
  <link rel="publisher" href="#"> 
  <meta name="robots" content="robots.txt"> 
  <meta name="og:title" content="jooby: spec module"> 
  <meta name="og:description" content="The spec module allows you to export your API/microservices outside a Jooby application"> 
  <!--
    og:type
    SI EL TEMPLATE ES UN ARTICULO (NOTA, VIDEO, ETC) CAMBIAR
    "website" por "article"
    --> 
  <meta name="og:type" content="website"> 
  <meta name="og:url" content="http://jooby.org"> 
  <!--
    og:image
    SI ES UNA NOTA Y LA NOTA TIENE UNA IMAGEN DE PREVIEW SE DEBE
    CAMBIAR POR UNA IMAGEN CON LAS SIGUIENTES ESPECIFICACIONES
    ANCHO: 200
    ALTO: 200
    FORMATO: JPG
    --> 
  <meta name="og:image" content="http://jooby.org/resources/images/apps/facebook.jpg"> 
  <meta name="og:site_name" content="jooby: spec module"> 
  <meta name="twitter:card" content="summary"> 
  <meta name="twitter:title" content="jooby: spec module"> 
  <!--
    twitter:image
    SI ES UNA NOTA Y LA NOTA TIENE UNA IMAGEN DE PREVIEW SE DEBE
    CAMBIAR POR UNA IMAGEN CON LAS SIGUIENTES ESPECIFICACIONES
    ANCHO: 280
    ALTO: 150
    FORMATO: JPG
    TAMAÑO MAXIMO: 1MB
    --> 
  <meta name="twitter:image" content="http://jooby.org/resources/images/apps/twitter.jpg"> 
  <meta name="twitter:site" content="@joobyproject"> 
  <meta name="twitter:creator" content="https://twitter.com/edgarespina"> 
  <meta name="twitter:domain" content="http://jooby.org"> 
  <meta name="twitter:url" content="https://twitter.com/joobyproject"> 
  <meta name="twitter:description" content="The spec module allows you to export your API/microservices outside a Jooby application"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed57.png" sizes="57x57"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed60.png" sizes="60x60"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed72.png" sizes="72x72"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed76.png" sizes="76x76"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed114.png" sizes="114x114"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed120.png" sizes="120x120"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed144.png" sizes="144x144"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed152.png" sizes="152x152"> 
  <link rel="apple-touch-icon-precomposed" href="/resources/images/apps/precomposed180.png" sizes="180x180"> 
  <link href="/resources/images/apps/favicon.ico" rel="shortcut icon"> 
  <link href="/resources/images/apps/favicon.png" rel="icon" sizes="16x16" type="image/png"> 
  <link href="/resources/images/apps/favicon32.png" rel="icon" sizes="32x32" type="image/png"> 
  <link href="/resources/images/apps/favicon96.png" rel="icon" sizes="96x96" type="image/png"> 
  <link href="/resources/images/apps/android-chrome.png" rel="icon" sizes="192x192" type="image/png"> 
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,300,500,700"> 
  <link rel="stylesheet" href="/resources/styles/application.css"> 
  <link rel="stylesheet" href="/resources/styles/github.css"> 
  <link rel="stylesheet" href="/resources/styles/devices.css"> 
  <link rel="stylesheet" href="/resources/styles/sprites.css"> 
 </head> 
 <body class="page-section page-sidebar"> 
  <header class="site-header"> 
   <div class="row">
    <a href="/" title="Home" class="site-logo"><img src="/resources/images/logo_jooby-2x.png" alt="Logo Jooby" width="76" height="31"></a>
    <a class="show-mobile open-menu"><span></span></a> 
    <nav class="site-nav"> 
     <ul> 
      <li class=""><a href="/quickstart" title="Quick start">QUICK START</a></li> 
      <li class=""><a href="/doc" title="Doc">DOCS</a></li> 
      <li class="active"><a href="/modules" title="Modules">MODULES</a></li> 
      <li class=""><a href="/community" title="Community">COMMUNITY</a></li> 
      <li class=""><a href="/faq" title="FAQ">FAQ</a></li> 
      <li><a href="/apidocs" target="_blank" title="API docs">API DOCS</a></li> 
     </ul> 
    </nav> 
   </div> 
  </header> 
  <main role="main" class="site-content"> 
   <div class="section-title"> 
    <div class="row"> 
     <a href="/modules" class="jsback" title="Go back"><span class="icon-arrowback-big-circle"></span></a> 
     <h1>route spec</h1> 
    </div> 
   </div> 
   <div class="row"> 
    <div class="section-sidebar" style="position: fixed; left: 120px; top: 160px; bottom: 20px;"> 
     <div class="show-mobile menu-open">
      route spec
     </div> 
     <ul> 
      <li class="active"> <a href="#route-spec">route spec</a></li> 
      <li class=""> <a href="#definition">definition</a>
       <ul> 
        <li> <a href="#definition-script-API">script API</a></li> 
        <li> <a href="#definition-mvc-API">mvc API</a></li> 
        <li> <a href="#definition-script-rules">script rules</a></li> 
        <li> <a href="#definition-writing-doc">writing doc</a></li> 
        <li> <a href="#definition-how-it-works-">how it works?</a></li>
       </ul></li> 
     </ul> 
    </div> 
    <div class="section-content"> 
     <div class="datalist" id="route-spec"> 
      <div class="datalist-title active"> 
       <h2>route spec</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>The spec module allows you to export your API/microservices outside a <a href="http://jooby.org">Jooby</a> application.</p> 
       <p>The goal of this module is to define a common way to write APIs and provide you tools like live doc and testing <strong>with no extra effort</strong>.</p> 
       <blockquote> 
        <p>You aren’t force to learn any other tool or annotated your code special annotations. All you have to do is <strong>write your application</strong> following a few/minor suggestions.</p> 
       </blockquote> 
       <p>This module process, collect and compile <strong>routes</strong> from your application. It extracts HTTP method/pattern, parameter, responses, types and doc.</p> 
       <p>You will find here the basis and the necessary documentation to build and expose rich APIs for free, but keep in mind this module isn’t intended for direct usage. It is the basis for tools like <a href="http://swagger.io" target="_blank">Swagger</a> or <a href="http://raml.org" target="_blank">RAML</a>.</p> 
      </div> 
     </div> 
     <div class="datalist" id="definition"> 
      <div class="datalist-title "> 
       <h2>definition</h2> 
      </div> 
      <div class="datalist-content"> 
       <p>Let’s review how to build rich APIs using the <code class="highlighter-rouge codehilite">spec</code> module via <code class="highlighter-rouge codehilite">script</code> or <code class="highlighter-rouge codehilite">mvc</code> way:</p> 
       <h3 id="definition-script-API">script API</h3> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="o">{</span>
  <span class="cm">/**</span>
   <span class="cm">* </span>
   <span class="cm">* Everything about your Pets. </span>
   <span class="cm">*/</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"/api/pets"</span><span class="o">)</span>
      <span class="cm">/**</span>
       <span class="cm">* </span>
       <span class="cm">* List pets ordered by id.</span>
       <span class="cm">* </span>
       <span class="cm">* @param start Start offset, useful for paging. Default is &lt;code&gt;0&lt;/code&gt;.</span>
       <span class="cm">* @param max Max page size, useful for paging. Default is &lt;code&gt;50&lt;/code&gt;.</span>
       <span class="cm">* @return Pets ordered by name. </span>
       <span class="cm">*/</span>
      <span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"start"</span><span class="o">).</span><span class="na">intValue</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
        <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"max"</span><span class="o">).</span><span class="na">intValue</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>
        <span class="n">DB</span> <span class="n">db</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">DB</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Pet</span><span class="o">&gt;</span> <span class="n">pets</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">start</span><span class="o">,</span> <span class="n">max</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">pets</span><span class="o">;</span>
      <span class="o">})</span>
      <span class="cm">/**</span>
       <span class="cm">* </span>
       <span class="cm">* Find pet by ID</span>
       <span class="cm">* </span>
       <span class="cm">* @param id Pet ID.</span>
       <span class="cm">* @return Returns &lt;code&gt;200&lt;/code&gt; with a single pet or &lt;code&gt;404&lt;/code&gt; </span>
       <span class="cm">*/</span>
      <span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/:id"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
        <span class="n">DB</span> <span class="n">db</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">DB</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">Pet</span> <span class="n">pet</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">pet</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">throw</span> <span class="k">new</span> <span class="n">Err</span><span class="o">(</span><span class="n">Status</span><span class="o">.</span><span class="na">NOT_FOUND</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">pet</span><span class="o">;</span>
      <span class="o">})</span>
      <span class="cm">/**</span>
       <span class="cm">* </span>
       <span class="cm">* Add a new pet to the store.</span>
       <span class="cm">* </span>
       <span class="cm">* @param body Pet object that needs to be added to the store.</span>
       <span class="cm">* @return Returns a saved pet. </span>
       <span class="cm">*/</span>
      <span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">Pet</span> <span class="n">pet</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">body</span><span class="o">().</span><span class="na">to</span><span class="o">(</span><span class="n">Pet</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">DB</span> <span class="n">db</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">DB</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">db</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">pet</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">pet</span><span class="o">;</span>
      <span class="o">})</span>
      <span class="cm">/**</span>
       <span class="cm">* </span>
       <span class="cm">* Update an existing pet.</span>
       <span class="cm">* </span>
       <span class="cm">* @param body Pet object that needs to be updated.</span>
       <span class="cm">* @return Returns a saved pet. </span>
       <span class="cm">*/</span>
      <span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">Pet</span> <span class="n">pet</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">body</span><span class="o">().</span><span class="na">to</span><span class="o">(</span><span class="n">Pet</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">DB</span> <span class="n">db</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">DB</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">db</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">pet</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">pet</span><span class="o">;</span>
      <span class="o">})</span>
      <span class="cm">/**</span>
       <span class="cm">* </span>
       <span class="cm">* Deletes a pet by ID.</span>
       <span class="cm">* </span>
       <span class="cm">* @param id Pet ID.</span>
       <span class="cm">* @return A &lt;code&gt;204&lt;/code&gt; </span>
       <span class="cm">*/</span>
      <span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="s">"/:id"</span><span class="o">,</span> <span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
        <span class="n">DB</span> <span class="n">db</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">DB</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        <span class="n">db</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">Results</span><span class="o">.</span><span class="na">noContent</span><span class="o">();</span>
      <span class="o">})</span>
      <span class="o">.</span><span class="na">produces</span><span class="o">(</span><span class="s">"json"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">consumes</span><span class="o">(</span><span class="s">"json"</span><span class="o">);</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h3 id="definition-mvc-API">mvc API</h3> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="cm">/**</span>
 <span class="cm">* </span>
 <span class="cm">* Everything about your Pets. </span>
 <span class="cm">*/</span>
<span class="nd">@Path</span><span class="o">(</span><span class="s">"/api/pets"</span><span class="o">)</span>
<span class="nd">@Consumes</span><span class="o">(</span><span class="s">"json"</span><span class="o">)</span>
<span class="nd">@Produces</span><span class="o">(</span><span class="s">"json"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Pets</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="n">DB</span> <span class="n">db</span><span class="o">;</span>

  <span class="nd">@Inject</span>
  <span class="kd">public</span> <span class="n">Pets</span><span class="o">(</span><span class="kd">final</span> <span class="n">DB</span> <span class="n">db</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">db</span> <span class="o">=</span> <span class="n">db</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
   <span class="cm">* </span>
   <span class="cm">* List pets ordered by name.</span>
   <span class="cm">* </span>
   <span class="cm">* @param start Start offset, useful for paging. Default is &lt;code&gt;0&lt;/code&gt;.</span>
   <span class="cm">* @param max Max page size, useful for paging. Default is &lt;code&gt;200&lt;/code&gt;.</span>
   <span class="cm">* @return Pets ordered by name. </span>
   <span class="cm">*/</span>
  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Pet</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">(</span><span class="kd">final</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">start</span><span class="o">,</span> <span class="kd">final</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">max</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">Pet</span><span class="o">&gt;</span> <span class="n">pets</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">Pet</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">start</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="mi">0</span><span class="o">),</span> <span class="n">max</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="mi">200</span><span class="o">));</span>
    <span class="k">return</span> <span class="n">pets</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
   <span class="cm">* </span>
   <span class="cm">* Find pet by ID.</span>
   <span class="cm">* </span>
   <span class="cm">* @param id Pet ID.</span>
   <span class="cm">* @return Returns a single pet </span>
   <span class="cm">*/</span>
  <span class="nd">@Path</span><span class="o">(</span><span class="s">"/:id"</span><span class="o">)</span>
  <span class="nd">@GET</span>
  <span class="kd">public</span> <span class="n">Pet</span> <span class="n">get</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Pet</span> <span class="n">pet</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">Pet</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">pet</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
   <span class="cm">* </span>
   <span class="cm">* Add a new pet to the store.</span>
   <span class="cm">* </span>
   <span class="cm">* @param pet Pet object that needs to be added to the store.</span>
   <span class="cm">* @return Returns a saved pet. </span>
   <span class="cm">*/</span>
  <span class="nd">@POST</span>
  <span class="kd">public</span> <span class="n">Pet</span> <span class="n">post</span><span class="o">(</span><span class="nd">@Body</span> <span class="kd">final</span> <span class="n">Pet</span> <span class="n">pet</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">db</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">pet</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">pet</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
   <span class="cm">* </span>
   <span class="cm">* Update an existing pet.</span>
   <span class="cm">* </span>
   <span class="cm">* @param body Pet object that needs to be updated.</span>
   <span class="cm">* @return Returns a saved pet. </span>
   <span class="cm">*/</span>
  <span class="nd">@PUT</span>
  <span class="kd">public</span> <span class="n">Pet</span> <span class="n">put</span><span class="o">(</span><span class="nd">@Body</span> <span class="kd">final</span> <span class="n">Pet</span> <span class="n">pet</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">db</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">pet</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">pet</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
   <span class="cm">* </span>
   <span class="cm">* Deletes a pet by ID.</span>
   <span class="cm">* </span>
   <span class="cm">* @param id Pet ID. </span>
   <span class="cm">*/</span>
  <span class="nd">@DELETE</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="n">delete</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">db</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">Pet</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>Previous examples are feature identical, but they were written in very different way. Still API Spec for them look likes:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
<span class="s">GET /api/pets</span>
  <span class="s">summary</span><span class="pi">:</span> <span class="s">Everything about your Pets.</span>
  <span class="s">doc</span><span class="pi">:</span> <span class="s">List pets ordered by name.</span>
  <span class="s">consumes</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">produces</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">params</span><span class="pi">:</span> 
    <span class="s">start</span><span class="pi">:</span> 
      <span class="s">paramType</span><span class="pi">:</span> <span class="s">QUERY</span>
      <span class="s">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="s">value</span><span class="pi">:</span> <span class="s">0</span>
      <span class="s">doc</span><span class="pi">:</span> <span class="s">Start offset, useful for paging. Default is &lt;code&gt;0&lt;/code&gt;.</span>
    <span class="s">max</span><span class="pi">:</span> 
      <span class="s">paramType</span><span class="pi">:</span> <span class="s">QUERY</span>
      <span class="s">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="s">value</span><span class="pi">:</span> <span class="s">200</span>
      <span class="s">doc</span><span class="pi">:</span> <span class="s">Max page size, useful for paging. Default is &lt;code&gt;200&lt;/code&gt;.</span>
  <span class="s">response</span><span class="pi">:</span> 
    <span class="s">type</span><span class="pi">:</span> <span class="s">java.util.List&lt;apps.model.Pet&gt;</span>
    <span class="s">doc</span><span class="pi">:</span> <span class="s">Pets ordered by name.</span>
<span class="s">GET /api/pets/:id</span>
  <span class="s">summary</span><span class="pi">:</span> <span class="s">Everything about your Pets.</span>
  <span class="s">doc</span><span class="pi">:</span> <span class="s">Find pet by ID</span>
  <span class="s">consumes</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">produces</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">params</span><span class="pi">:</span> 
    <span class="s">id</span><span class="pi">:</span> 
      <span class="s">paramType</span><span class="pi">:</span> <span class="s">PATH</span>
      <span class="s">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="s">doc</span><span class="pi">:</span> <span class="s">Pet ID.</span>
  <span class="s">response</span><span class="pi">:</span> 
    <span class="s">type</span><span class="pi">:</span> <span class="s">apps.model.Pet</span>
    <span class="s">doc</span><span class="pi">:</span> <span class="s">Returns &lt;code&gt;200&lt;/code&gt; with a single pet or &lt;code&gt;404&lt;/code&gt;</span>
<span class="s">POST /api/pets</span>
  <span class="s">summary</span><span class="pi">:</span> <span class="s">Everything about your Pets.</span>
  <span class="s">doc</span><span class="pi">:</span> <span class="s">Add a new pet to the store.</span>
  <span class="s">consumes</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">produces</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">params</span><span class="pi">:</span> 
    <span class="s">&lt;body&gt;</span><span class="pi">:</span> 
      <span class="s">paramType</span><span class="pi">:</span> <span class="s">BODY</span>
      <span class="s">type</span><span class="pi">:</span> <span class="s">apps.model.Pet</span>
      <span class="s">doc</span><span class="pi">:</span> <span class="s">Pet object that needs to be added to the store.</span>
  <span class="s">response</span><span class="pi">:</span> 
    <span class="s">type</span><span class="pi">:</span> <span class="s">apps.model.Pet</span>
    <span class="s">doc</span><span class="pi">:</span> <span class="s">Returns a saved pet.</span>
<span class="s">PUT /api/pets</span>
  <span class="s">summary</span><span class="pi">:</span> <span class="s">Everything about your Pets.</span>
  <span class="s">doc</span><span class="pi">:</span> <span class="s">Update an existing pet.</span>
  <span class="s">consumes</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">produces</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">params</span><span class="pi">:</span> 
    <span class="s">&lt;body&gt;</span><span class="pi">:</span> 
      <span class="s">paramType</span><span class="pi">:</span> <span class="s">BODY</span>
      <span class="s">type</span><span class="pi">:</span> <span class="s">apps.model.Pet</span>
      <span class="s">doc</span><span class="pi">:</span> <span class="s">Pet object that needs to be updated.</span>
  <span class="s">response</span><span class="pi">:</span> 
    <span class="s">type</span><span class="pi">:</span> <span class="s">apps.model.Pet</span>
    <span class="s">doc</span><span class="pi">:</span> <span class="s">Returns a saved pet.</span>
<span class="s">DELETE /api/pets/:id</span>
  <span class="s">summary</span><span class="pi">:</span> <span class="s">Everything about your Pets.</span>
  <span class="s">doc</span><span class="pi">:</span> <span class="s">Deletes a pet by ID.</span>
  <span class="s">consumes</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">produces</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">application/json</span><span class="pi">]</span>
  <span class="s">params</span><span class="pi">:</span> 
    <span class="s">id</span><span class="pi">:</span> 
      <span class="s">paramType</span><span class="pi">:</span> <span class="s">PATH</span>
      <span class="s">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="s">doc</span><span class="pi">:</span> <span class="s">Pet ID.</span>
  <span class="s">response</span><span class="pi">:</span> 
    <span class="s">type</span><span class="pi">:</span> <span class="s">void</span>
    <span class="s">doc</span><span class="pi">:</span> <span class="s">A &lt;code&gt;204&lt;/code&gt;</span>
</code></pre> 
       </div> 
       <blockquote> 
        <p>NOTE: We use <code class="highlighter-rouge codehilite">textual</code> representation here for simplicity and easy read, but keep in mind the output is compiled into a binary format.</p> 
       </blockquote> 
       <h3 id="definition-script-rules">script rules</h3> 
       <p>Have a look at the previous examples again? Do you see anything special? No, right?</p> 
       <p>Well there are some minor things you need to keep in mind for getting or collecting route metadata from <strong>script</strong> routes:</p> 
       <h4 id="definition-params">params</h4> 
       <p>Params need to be in one sentence/statement, like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>not like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="n">Mutant</span> <span class="n">p</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"id"</span><span class="o">);</span>
  <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="na">intValue</span><span class="o">();</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <h4 id="definition-response-type-a-k-a-return-type-">response type (a.k.a return type)</h4> 
       <p>There should be <strong>ONLY one</strong> return statement and return type needs to be declared as variable, like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="n">Pet</span> <span class="n">pet</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">id</span><span class="o">);</span> <span class="c1">// variable pet</span>
  <span class="o">...</span>
  <span class="k">return</span> <span class="n">pet</span><span class="o">;</span>  <span class="c1">// single return statement</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>not like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">id</span><span class="o">);</span> <span class="c1">// we aren't able to tell what type returns db.find</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>or</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
  <span class="o">...</span>
  <span class="c1">// multiple returns statement</span>
  <span class="k">if</span> <span class="o">(...)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">...;</span> <span class="c1">// here is one</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">...;</span> <span class="c1">// here is another</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre> 
       </div> 
       <p>There is a workaround if these rules doesn’t make sense to you and/or the algorithm fails to resolve the correct type. Please checkout next section.</p> 
       <h3 id="definition-writing-doc">writing doc</h3> 
       <p>If you take a few minutes and write good quality doc the prize will be huge!</p> 
       <p>The tool takes and export the doc as part of your API!!</p> 
       <p>Here is an example on how to document script routes:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>  <span class="cm">/** * Everything about your Pets. */</span>
  <span class="n">use</span><span class="o">(</span><span class="s">"/api/pets"</span><span class="o">)</span>
     <span class="cm">/**</span>
      <span class="cm">* </span>
      <span class="cm">* List pets ordered by name.</span>
      <span class="cm">* </span>
      <span class="cm">* @param start Start offset, useful for paging. Default is &lt;code&gt;0&lt;/code&gt;.</span>
      <span class="cm">* @param max Max page size, useful for paging. Default is &lt;code&gt;200&lt;/code&gt;.</span>
      <span class="cm">* @return Pets ordered by name. </span>
      <span class="cm">*/</span>
    <span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="kt">int</span> <span class="n">start</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"start"</span><span class="o">).</span><span class="na">intValue</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
      <span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">param</span><span class="o">(</span><span class="s">"max"</span><span class="o">).</span><span class="na">intValue</span><span class="o">(</span><span class="mi">200</span><span class="o">);</span>
      <span class="n">DB</span> <span class="n">db</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">DB</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="n">Pet</span><span class="o">&gt;</span> <span class="n">pets</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">Pet</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">start</span><span class="o">,</span> <span class="n">max</span><span class="o">);</span>
      <span class="k">return</span> <span class="n">pets</span><span class="o">;</span>
    <span class="o">});</span>
</code></pre> 
       </div> 
       <p>The route params for <code class="highlighter-rouge codehilite">/api/pets</code> looks like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>  <span class="s">params</span><span class="pi">:</span> 
    <span class="s">start</span><span class="pi">:</span> 
      <span class="s">paramType</span><span class="pi">:</span> <span class="s">QUERY</span>
      <span class="s">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="s">value</span><span class="pi">:</span> <span class="s">0</span>
      <span class="s">doc</span><span class="pi">:</span> <span class="s">Start offset, useful for paging. Default is &lt;code&gt;0&lt;/code&gt;.</span>
    <span class="s">max</span><span class="pi">:</span> 
      <span class="s">paramType</span><span class="pi">:</span> <span class="s">QUERY</span>
      <span class="s">type</span><span class="pi">:</span> <span class="s">int</span>
      <span class="s">value</span><span class="pi">:</span> <span class="s">200</span>
      <span class="s">doc</span><span class="pi">:</span> <span class="s">Max page size, useful for paging. Default is &lt;code&gt;200&lt;/code&gt;.</span>
  <span class="s">response</span><span class="pi">:</span> 
    <span class="s">type</span><span class="pi">:</span> <span class="s">java.util.List&lt;apps.model.Pet&gt;</span>
    <span class="s">doc</span><span class="pi">:</span> <span class="s">Pets ordered by name.</span>
</code></pre> 
       </div> 
       <h4 id="definition-response">response</h4> 
       <p>With JavaDoc, you can control the default type returned by the route and/or the status codes. For example:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>
  <span class="cm">/**</span>
   <span class="cm">* </span>
   <span class="cm">* Find pet by ID.</span>
   <span class="cm">* </span>
   <span class="cm">* @param id Pet ID.</span>
   <span class="cm">* @return Returns a {@link Pet} with &lt;code&gt;200&lt;/code&gt; status or &lt;code&gt;404&lt;/code&gt; </span>
   <span class="cm">*/</span>
  <span class="n">get</span><span class="o">(</span><span class="n">req</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">DB</span> <span class="n">db</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">require</span><span class="o">(</span><span class="n">DB</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">db</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">Pet</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">id</span><span class="o">);</span>
  <span class="o">});</span>
</code></pre> 
       </div> 
       <p>Produces:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="s">response</span><span class="pi">:</span>
    <span class="s">type</span><span class="pi">:</span> <span class="s">apps.model.Pet</span>
    <span class="s">statusCodes</span><span class="pi">:</span> 
      <span class="s">200</span><span class="pi">:</span> <span class="s">Success</span>
      <span class="s">404</span><span class="pi">:</span> <span class="s">Not Found</span>
    <span class="s">doc</span><span class="pi">:</span> <span class="s">Returns &lt;code&gt;200&lt;/code&gt; with a single pet or &lt;code&gt;404&lt;/code&gt;</span>
</code></pre> 
       </div> 
       <p>Here you tell the tool response is a <code class="highlighter-rouge codehilite">Pet</code> via <em>JavaDoc</em> type references: <code class="highlighter-rouge codehilite"><span class="p">{</span><span class="err">@link</span><span class="w"> </span><span class="err">Type</span><span class="p">}</span></code>.</p> 
       <p>This is useful when the tool isn’t able to detect the type for you and/or you aren’t able to follow the return rules described before.</p> 
       <p>The status codes section have a <code class="highlighter-rouge codehilite">200</code> and <code class="highlighter-rouge codehilite">404</code> entries with default messages. You can override the default message by using <code class="highlighter-rouge codehilite">code = message</code> like:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code>@return Returns a {@link Pet} with &lt;code&gt;200 = Success&lt;/code&gt; status or &lt;code&gt;404 = Missing&lt;/code&gt;
</code></pre> 
       </div> 
       <h3 id="definition-how-it-works-">how it works?</h3> 
       <p>The spec module scan and parse the source code: <code class="highlighter-rouge codehilite">*.java</code> and produces a list of <code class="highlighter-rouge codehilite">RouteSpec</code>.</p> 
       <p>It is required for getting information from <code class="highlighter-rouge codehilite">script routes</code> and extract <code class="highlighter-rouge codehilite">JavaDoc</code>.</p> 
       <p>We don’t need that for <code class="highlighter-rouge codehilite">mvc routes</code> because all the information is available via <em>Reflection</em> and <code class="highlighter-rouge codehilite">java.lang.Method</code>.</p> 
       <p>So, the tool needs the source code in order to work properly. In order to use the tool at deploy time you have to setup the <code class="highlighter-rouge codehilite">jooby:spec</code> maven plugin:</p> 
       <div class="highlighter-rouge codehilite">
        <div class="copy-bar"> 
         <span class="icon-clipboard-big copy-button octicon octicon-clippy" title="copy to clipboard"></span>
        </div> 
        <pre class="highlight"><code><span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>org.jooby<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>jooby-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;executions&gt;</span>
    <span class="nt">&lt;execution&gt;</span>
      <span class="nt">&lt;goals&gt;</span>
        <span class="nt">&lt;goal&gt;</span>spec<span class="nt">&lt;/goal&gt;</span>
      <span class="nt">&lt;/goals&gt;</span>
    <span class="nt">&lt;/execution&gt;</span>
  <span class="nt">&lt;/executions&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</code></pre> 
       </div> 
       <p>The maven plugin exports the API into a binary format: <code class="highlighter-rouge codehilite">.spec</code> which can be parse it later.</p> 
       <p>That’s all about the spec, as you see there are some minor rules to follow while writing <code class="highlighter-rouge codehilite">script routes</code>. Now it’s time see what tools and integrations are available!!!</p> 
      </div> 
     </div> 
    </div> 
   </div> 
   <!-- AddToAny BEGIN --> 
   <div class="row share-network"> 
    <div class="section-content"> 
     <h3>Share</h3> 
     <div class="a2a_kit a2a_kit_size_32 a2a_default_style" data-a2a-url="http://jooby.org/doc/spec" data-a2a-title="The spec module allows you to export your API/microservices outside a Jooby application"> 
      <a class="a2a_button_twitter" data-text="The spec module allows you to export your API/microservices outside a Jooby application"></a> 
      <a class="a2a_button_reddit a2a_counter"></a> 
      <a class="a2a_button_linkedin a2a_counter"></a> 
      <a class="a2a_button_facebook a2a_counter"></a> 
      <a class="a2a_button_google_plus a2a_counter"></a> 
     </div> 
    </div> 
   </div> 
   <script async src="https://static.addtoany.com/menu/page.js"></script> 
   <!-- AddToAny END --> 
  </main> 
  <footer class="site-footer"> 
   <div class="row"> 
    <p class="pull-left">©2014-2016 <a href="https://twitter.com/edgarespina" target="_blank">Edgar Espina</a></p> 
    <div class="altquimia">
     DG 
     <a href="http://www.altquimia.com/" title="Altquimia | Creative Studio" rel="nofollow" target="_blank">Altquimia</a> | Creative Studio
    </div> 
    <div class="follow-us pull-right"> 
     <p>Follow us</p>
     <a href="https://github.com/jooby-project/jooby" title="Follow us on Github" target="_blank" rel="nofollow"><span class="icon-github-medium-circle"></span></a>
     <a href="https://twitter.com/joobyproject" title="Follow us on Twitter" target="_blank" rel="nofollow"><span class="icon-twitter-medium-circle"></span></a> 
    </div> 
   </div> 
  </footer> 
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> 
  <script>window.jQuery || document.write('<script src="/resources/scripts/jquery-2.1.4.min.js"><\/script>')</script> 
  <script src="/resources/scripts/libs/swiper.min.js"></script> 
  <script src="/resources/scripts/application.js"></script> 
  <script src="//jooby.org/resources/scripts/ZeroClipboard.min.js"></script> 
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-57151281-1', 'auto');
      ga('send', 'pageview');
    </script>  
 </body>
</html>
